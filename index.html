<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <title>Coding Quiz</title>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 col-md-6">
                View High Score
            </div>
            <div id="game-clock-container" class="col-12 col-md-6 text-md-right">
                Time: <span id="game-clock">XX</span>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row justify-content-center">
            <main class="col-8">
                <h1 id="heading1" class="mb-3">Coding Quiz Challenge</h1>
                <div id="start-menu">
                    <p>Test your knowledge of Javascript by answering a series of questions.</p>

                    <button onclick="startQuiz()" class="btn btn-primary">Start the quiz</button>
                </div>
                <div id="choices-menu">

                </div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/questions.js"></script>
    <script>

        // Variables of elements on page
        var choicesContent = document.querySelector("#choices-menu");
        var startMenu = document.getElementById('start-menu');
        var questionHeading = document.getElementById('heading1');

        // Variable containing question array data
        // referred to in the functions
        var numberOfQuestions = questions.length;
        var questionChoices = questions[questionNumber].choices;

        // Default numbers for the game
        // to start at first question, setting time, etc.
        var questionNumber = 0;
       
        // Function for when user clicks the start button
        function startQuiz() {

            // Hide the default start menu
            startMenu.setAttribute("style", "display: none;");

            // Place first question in h1 and create buttons
            // of the multiple choice answers below
            questionHeading.textContent = questions[questionNumber].title;
            listChoices();

            // Add event to the button choices and see if what the 
            // user clicks matches the answer in the questions array
            document.addEventListener("click", function(event) {
                if (event.target.matches('.choice-btn')) {
                    
                    // Condition if user selects correct answer
                    if (event.target.textContent === questions[questionNumber].answer) {
                        // Move on to the next question
                        questionNumber++;
                        questionHeading.textContent = questions[questionNumber].title;
                        // Run function to clear buttons
                        // and list new choices
                        choicesContent.innerHTML = " ";
                        listChoices();
                    } 
                    // Condition if user selects wrong answer
                    else {
                        // Move on to the next question
                        questionNumber++;
                        questionHeading.textContent = questions[questionNumber].title;
                        // Run function to clear buttons
                        // and list new choices
                        choicesContent.innerHTML = " ";
                        listChoices();
                    }
                }
            });
            
            
            
            
        }

        function listChoices() {
            // Loop through the available choices in
            // the given question array index
            for (var i = 0; i < questionChoices.length; i++) {
                // Create, build, and place the available choices
                var choiceBtn = document.createElement("button");
                choiceBtn.setAttribute("class", "btn btn-primary btn-sm d-block my-2 choice-btn");
                choiceBtn.setAttribute("id", "choice-" + i );
                choiceBtn.textContent = questions[questionNumber].choices[i];
                choicesContent.appendChild(choiceBtn);

            }
        }
    </script>
</body>
</html>